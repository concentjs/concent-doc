---
heroImage: /favicon.png
actionText: Get Started â†’
actionLink: /guide/first-sight
home: true
showStar: true
# features:
#   - title: é«˜æ€§èƒ½
#     details: Feature1 Details...
#   - title: Feature2
#     details: Feature2 Details...
#   - title: Feature3
#     details: Feature3 Details...
---

<a class="getStarted" href="./guide/first-sight">
  å¿«é€Ÿå¼€å§‹ âœ
</a>


<div style="display:flex; flex-wrap: wrap; justify-content: center;">

  <a href='https://www.npmjs.com/package/concent' style='margin: 0 0.5rem;'>
  <img src='https://img.shields.io/github/package-json/v/concentjs/concent/master.svg?label=npm%20version' alt='npm version' height='22px' style="max-width:200px;"/>
  </a>

  <a href='#' style='margin: 0 0.5rem;'>
  <img src='https://img.shields.io/npm/dw/concent.svg?label=downloads' alt='downloads' height='22px'  style="max-width:200px;"/>
  </a>

  <a href='#' style='margin: 0 0.5rem;'>
  <img src='https://img.shields.io/github/commit-activity/m/concentjs/concent.svg' alt='commit activity' height='22px' style="max-width:200px;"/>
  </a>

  <a href='#' style='margin: 0 0.5rem;'>
  <img src='https://img.shields.io/npm/l/concent.svg' alt='license:MIT' height='22px' style="max-width:200px;" />
  </a>

  <a href='#' style='margin: 0 0.5rem;'>
  <img src='https://img.shields.io/github/followers/fantasticsoul.svg?style=social' alt='followers' height='22px' style="max-width:200px;" />
  </a>

  <a href='https://github.com/concentjs/concent' target="blink" style='margin: 0 0.5rem;'>
  <img src='https://img.shields.io/github/stars/concentjs/concent.svg?style=social' alt='concent star' height='22px' style="max-width:200px;"/>
  </a>
</div>

<h2 style="font-weight:300; width:100%; text-align:center; margin: 66px 0;">ä½¿ç”¨<span style="font-weight:600;" >Concent</span> ä½ å°†äº«å—åˆ°</h2>
<div style="display:flex; justify-content:flex-start; flex-flow: row wrap;">

  <div class="featureWrap">
    <div class="featureImgBase featureImg1 fibs1"></div>
    <h2>æç®€æ ¸å¿ƒapi</h2>
    <p class="featureContent">
      runè½½å…¥æ¨¡å—é…ç½®ï¼Œregisteræ³¨å†Œç±»ç»„ä»¶ï¼ŒuseConcentæ³¨å†Œå‡½æ•°ç»„ä»¶ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg2 fibs2"></div>
    <h2>0å…¥ä¾µæˆæœ¬æ¥å…¥</h2>
    <p class="featureContent">
      æ— æ ¹ProvideråŒ…è£¹ï¼Œæ³¨å†Œåçš„ç»„ä»¶setStateå³å¯æ›´æ–°storeã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg3 fibs3"></div>
    <h2>è´´å¿ƒæ¨¡å—é…ç½®</h2>
    <p class="featureContent">
      æ¨¡å—æä¾›stateã€reducerã€watchã€computedå’Œinit 5ä¸ªé€‰é¡¹ï¼Œæ”¯æŒæŒ‰éœ€å®šä¹‰ï¼Œè¦†ç›–æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg4 fibs4"></div>
    <h2>æ•°æ®æ¶ˆè´¹ç²’åº¦çµæ´»</h2>
    <p class="featureContent">
      æ”¯æŒç»„ä»¶è·¨å¤šä¸ªæ¨¡å—æ¶ˆè´¹æ•°æ®ï¼Œå®šä¹‰keyçº§åˆ«çš„å˜æ›´ä¾èµ–ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg5 fibs4"></div>
    <h2>æ¸è¿›å¼</h2>
    <p class="featureContent">
      é™¤setStateä¹‹å¤–ï¼Œè¿˜æ”¯æŒdispatchã€invokeæäº¤æ•°æ®å˜æ›´ï¼ŒåŒæ—¶è®©uiè§†å›¾ä¸ä¸šåŠ¡é€»è¾‘å½»åº•è§£è€¦ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg6 fibs3"></div>
    <h2>ç»„ä»¶èƒ½åŠ›å¢å¼º</h2>
    <p class="featureContent">
      æ”¯æŒå®ä¾‹çº§åˆ«computedã€watchå®šä¹‰ï¼›æ”¯æŒç»„ä»¶emit&onï¼›æ”¯æŒsetupç‰¹æ€§å®ç°composition api.
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg7 fibs2"></div>
    <h2>é«˜åº¦ä¸€è‡´çš„ç¼–ç¨‹ä½“éªŒ</h2>
    <p class="featureContent">
      hocã€render propså’Œhook 3ç§æ–¹å¼å®šä¹‰çš„ç»„ä»¶å‡äº«æœ‰ä¸€è‡´çš„apiè°ƒç”¨ä½“éªŒï¼Œç›¸äº’åˆ‡æ¢ä»£ä»·ä¸º0ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg8 fibs1"></div>
    <h2>æ¸²æŸ“æ€§èƒ½å‡ºä¼—</h2>
    <p class="featureContent">
      å¯ç”¨Proxyåœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¶é›†æ¯ä¸€ä¸ªç»„ä»¶çš„æœ€æ–°ä¾èµ–åˆ—è¡¨ï¼Œä¿è¯æœ€å°ç²’åº¦æ›´æ–°ï¼ŒåŒæ—¶å†…ç½®renderKeyã€lazyDispatchã€delayBroadcastç­‰é«˜çº§ç‰¹æ€§æ»¡è¶³æ›´å¤æ‚çš„æ›´æ–°åœºæ™¯ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg9 fibs1"></div>
    <h2>å¹²å‡€çš„domå±‚çº§</h2>
    <p class="featureContent">
      å¯¹äºclassç»„ä»¶ï¼Œé»˜è®¤é‡‡ç”¨åå‘ç»§æ‰¿ç­–ç•¥ï¼Œè®©react domæ ‘çš„å±‚çº§ç»“æ„ä¿æŒç®€æ´ä¸å¹²å‡€ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg10 fibs2"></div>
    <h2>æ‰©å±•ä¸­é—´ä»¶ä¸æ’ä»¶</h2>
    <p class="featureContent">
      æ”¯æŒå®šä¹‰ä¸­é—´ä»¶æ‹¦æˆªæ‰€æœ‰çš„æ•°æ®å˜æ›´æäº¤è®°å½•åšé¢å¤–å¤„ç†ï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ’ä»¶æ¥æ”¶è¿è¡Œæ—¶çš„å„ç§ä¿¡å·ï¼Œå¢å¼ºconcentèƒ½åŠ›ã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg11 fibs3"></div>
    <h2>å»ä¸­å¿ƒåŒ–é…ç½®æ¨¡å—</h2>
    <p class="featureContent">
      æ”¯æŒä»»æ„åœ°æ–¹è°ƒç”¨configureæ¥å£åŠ¨æ€é…ç½®æ¨¡å—ï¼Œæ–¹ä¾¿å°±è¿‘é…ç½®æ¨¡å—ï¼Œä¸”èƒ½å¤Ÿç‹¬ç«‹æ‰“åŒ…ç»„ä»¶å‘å¸ƒnpmã€‚
    </p>
  </div>

  <div class="featureWrap">
    <div class="featureImgBase featureImg12 fibs4"></div>
    <h2>æ¨¡å—å…‹éš†</h2>
    <p class="featureContent">
      æ”¯æŒå¯¹å·²å®šä¹‰æ¨¡å—è¿›è¡Œå…‹éš†è¿è¡Œæ—¶æ˜¯å®Œå…¨ç‹¬ç«‹çš„æ–°æ¨¡å—ï¼Œæ»¡è¶³æŠ½è±¡å·¥å‚å‡½æ•°ç­‰é«˜ç»´åº¦æŠ½è±¡ã€‚
    </p>
  </div>

</div>

<h2 style="font-weight:300; width:100%; text-align:center; margin: 66px 0;">
  åˆä½“éªŒ<span style="font-weight:600;" >Concentæ ‡å‡†åº”ç”¨</span>
</h2>
<div class="summaryContent textLeft">
  è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„concentåº”ç”¨ç¤ºä¾‹ï¼ŒåŸºäºtypeæ ‡æ³¨è®©æ•´ä¸ªå·¥ç¨‹çš„å¯é˜…è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¤§å¹…ä¸Šå‡ï¼Œæ¬¢è¿ä½“éªŒã€forkå¹¶ä¿®æ”¹ã€‚
</div>
<div class="summaryContentJump">
  å¦‚æ˜¯æ–°ç”¨æˆ·ï¼Œå»ºè®®æ»šåŠ¨è‡³ä¸‹æ–¹ï¼Œé˜…è¯»å¿«é€Ÿä¸Šæ‰‹ï¼Œé¢†æ‚ŸConcentæ ¸å¿ƒç†å¿µæ¥æé«˜ä½ çš„reactå¼€å‘ä½“éªŒå§^_^
</div>
<br />

<div style="width:100%;display:flex;">
<iframe style="width:1440px;height:860px;margin:0 auto" src="https://codesandbox.io/s/concent-guide-xvcej"></iframe>
</div>
<br/>
<a class="seeDemoCode cake" href="https://codesandbox.io/s/concent-guide-xvcej">è®¿é—®æ­¤ç¤ºä¾‹ï¼ˆjsç‰ˆæœ¬ï¼‰</a>
<br/>
<a class="seeDemoCode cake" href="https://codesandbox.io/s/concent-guide-ts-zrxd5">è®¿é—®æ­¤ç¤ºä¾‹ï¼ˆtsç‰ˆæœ¬ï¼‰</a>

___
<h2 style="font-weight:300; width:100%; text-align:center; margin: 66px 0;">
  å¦‚ä½•<span style="font-weight:600;" >å®‰è£…</span>
</h2>


```bash
npm install concent --save

//or 

yarn add concent
```

<!-- <div style="text-align: center;">
  <img src="/concent-doc/img/install-concent.png" width="780px" style="margin:0 auto"/>
</div> -->

<h2 style="font-weight:300; width:100%; text-align:center; margin: 66px 0;">
  å¿«é€Ÿ<span style="font-weight:600;">ä¸Šæ‰‹</span>
</h2>

<h3 class="seeDemoCode textLeft">
  å®šä¹‰æ¨¡å—çŠ¶æ€
</h3>
<br />

<div class="summaryContent textLeft">
  concentæ¨å´‡æ¨¡å—åŒ–çš„ç®¡ç†æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œä»¥ä¾¿è®©å·¨å¤§çš„çŠ¶æ€æ ‘å¾—ä»¥æŒ‰åœºæ™¯æˆ–ä¸šåŠ¡ç²¾å‡†åœ°æ‹†åˆ†ä¸ºæ›´å°çš„åˆ†æ”¯ï¼Œåˆ©äºç»´æŠ¤å’Œæ‰©å±•ã€‚
</div>
<br />

```js
import { run } from 'concent';

run({
  counter: {
    state: { num: 1, numBig: 100 },
  }
});
```

<br />
<h3 class="seeDemoCode textLeft">
  ç»„ä»¶æ¶ˆè´¹&ä¿®æ”¹æ¨¡å—çŠ¶æ€
</h3>
<br />

<div class="summaryContent textLeft">
  ä¾æ‰˜è¿è¡Œæ—¶çš„ä¾èµ–æ”¶é›†æœºåˆ¶ï¼Œæ‰€æœ‰å®ä¾‹åœ¨æ¯ä¸€è½®æ¸²æŸ“æœŸé—´è¯»å–æ¨¡å—çŠ¶æ€æ—¶ï¼Œconcentå°†æ”¶é›†åˆ°å®ƒä»¬éœ€è¦è¢«é‡æ¸²æŸ“çš„æ•°æ®ä¾èµ–å…³ç³»ï¼Œä»è€Œå®ç°ç²¾ç¡®æ›´æ–°ï¼Œå°†éœ€è¦äººå·¥ä»‹å…¥çš„ç»„ä»¶ä¼˜åŒ–è´Ÿæ‹…é™ä½ä¸º0ã€‚
</div>
<div style="text-align:center;">
<img style="max-width:780px" src="https://raw.githubusercontent.com/fantasticsoul/assets/master/img/cc-re-render-process.png"/>
</div>
<div class="summaryContent textLeft">
  ä¸‹é¢ç¤ºä¾‹å®šä¹‰äº†ç»„ä»¶æ‰€å±çš„æ¨¡å—ä¸ºcounterï¼Œåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨setStateæ—¶ï¼Œé™¤äº†è§¦å‘è‡ªå·±é‡æ¸²æŸ“ï¼Œæ•°æ®è¿˜å°†æäº¤åˆ°storeé‡Œçš„couneræ¨¡å—ä¸‹ï¼Œä¹‹åconcentä¼šå°†å…¶åˆ†å‘åˆ°å…¶ä»–åŒå±äºcounteræ¨¡å—çš„å®ä¾‹ã€‚
</div>
<br />

```js
import { register, useConcent } from 'concent';

@register('counter')
class DemoCls extends React.Component{
  inc = ()=> this.setState({num: this.state.num + 1})
  render(){
    // æ­¤å¤„è¯»å–äº†numï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹çš„æ¸²æŸ“ä¾èµ–åˆ—è¡¨æ˜¯ ['num']
    const { num } = this.state;
    // render logic
  }
}

function DemoFn(){
  const { state, setState } = useConcent('counter');
  const inc = ()=> setState({num: state.num + 1});
  // render logic
}
```

<div class="summaryContent textLeft">
  stateç”±ç§æœ‰çŠ¶æ€å’Œæ¨¡å—çŠ¶æ€åˆæˆè€Œæ¥ï¼Œæˆ‘ä»¬å¯åœ¨ç»„ä»¶ä¸Šå®šä¹‰éæ¨¡å—çš„keyæ¥å£°æ˜ç§æœ‰çŠ¶æ€ï¼Œå½“ç„¶äº†æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»moduleStateé‡Œåªè·å–ä¸æ¨¡å—ç›¸å…³çš„æ•°æ®
</div>

```js
// privNumæ˜¯ä¸€ä¸ªæ¨¡å—é‡Œä¸å­˜åœ¨çš„keyï¼Œåˆå§‹åŒ–å®ä¾‹æ—¶ä¸ä¼šè¢«æ¨¡å—çŠ¶æ€æ‰€è¦†ç›–
const privState = ()=> ({privNum: 1000});

@register('counter')
class DemoCls extends React.Component{
  state = privState()
  render(){
    const { state, moduleState } = this.ctx;// this.ctx.state === this.state
  }
}

function DemoFn(){
  const { state, moduleState } = useConcent({module:'counter', state:privState });
}
```

<br />
<h3 class="seeDemoCode textLeft">
  æ¸²æŸ“ç»„ä»¶
</h3>
<br />

<div class="summaryContent textLeft">
  è°ƒç”¨runæ¥å£é…ç½®æ¨¡å—æ•°æ®ï¼Œå¯åŠ¨concentä¹‹åï¼Œconcentä¼šè‡ªå·±ç”Ÿæˆä¸€ä»½å…¨å±€ä¸Šä¸‹æ–‡å¹¶ç‹¬ç«‹ç»´æŠ¤ç€ï¼Œç”¨äºç®¡ç†ç»„ä»¶å®ä¾‹ä¸æ¨¡å—ç›´æ¥çš„å…³ç³»ï¼Œå› å…¶ä¸ä¾èµ–reactçš„Context apiï¼Œæ‰€ä»¥æ¥å…¥concentæ— éœ€å¯¹é¡¶å±‚æ ¹ç»„ä»¶åŒ…è£¹Providerï¼Œåšåˆ°çœŸæ­£çš„æ— æ„ŸçŸ¥æ¥å…¥å’Œå³æ’å³ç”¨ã€‚
</div>
<br />

```jsx
const rootElement = document.getElementById("root");
ReactDOM.render(
  <React.StrictMode>
    <div>
      <ClsComp />
      <FnComp />
    </div>
  </React.StrictMode>,
  rootElement
);
```

<h2 style="font-weight:300; width:100%; text-align:center; margin: 66px 0;">
  <span style="font-weight:600;">è¿›é˜¶</span>äº†è§£
</h2>

<h3 class="seeDemoCode textLeft">
  å®šä¹‰æ¨¡å—reducer
</h3>
<br />

<div class="summaryContent textLeft">
  å¦‚æœä¿®æ”¹çŠ¶æ€ä¹‹å‰ï¼Œéœ€è¦åšä¸šåŠ¡é€»è¾‘å¤„ç†æ‰èƒ½å¾—åˆ°æ¬²ä¿®æ”¹çš„çŠ¶æ€ï¼Œæ¨èå°†å…¶å†™åˆ°æ¨¡å—reduceré‡Œ(å¯ä»¥æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥çš„)ï¼Œè§£è€¦uiæ¸²æŸ“ä¸ä¸šåŠ¡é€»è¾‘ã€‚
</div>
<div class="summaryContentTip">
ä¸ºäº†è®©concentæ€»æ˜¯å¤„äºæœ€é«˜çš„æ€§èƒ½æ¨¡å¼ä¸‹è¿è¡Œï¼Œreduceré‡Œä»…éœ€è¦è¿”å›éƒ¨åˆ†çŠ¶æ€ï¼Œå³ä¿®æ”¹äº†ä»€ä¹ˆåˆ™è¿”å›ä»€ä¹ˆï¼Œæ–¹ä¾¿concenté€šçŸ¥å…³å¿ƒè¿™äº›å˜åŒ–çš„å®ä¾‹é‡æ¸²æŸ“ã€‚
</div>
<br />

```js
run({
  counter: { 
    state: {/** ... */},
    reducer: {
      inc(payload, moduleState) {
        return { num: moduleState.num + 1 };
      },
      async asyncInc(payload, moduleState) {
        await delay();
        return { num: moduleState.num + 1 };
      }
    },
  },
});
```

<div class="summaryContent textLeft">
  ç»„ä»¶å†…éƒ¨å¯é€šè¿‡ctx.mrç›´æ¥è°ƒç”¨æ¨¡å—reduceré‡Œçš„æ–¹æ³•ã€‚(mræ˜¯moduleReducerçš„ç¼©å†™)
</div>

```js
//  --------- å¯¹äºç±»ç»„ä»¶ -----------
changeNum = () => this.setState({ num: 10 })
// ===> ä¿®æ”¹ä¸º
changeNum = () => this.ctx.mr.inc(10);// or this.ctx.mr.asynInc(10)

//å½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥å†™ä¸ºctx.dispatchè°ƒç”¨ï¼Œä¸è¿‡æ›´æ¨èç”¨ä¸Šé¢çš„moduleReducerç›´æ¥è°ƒç”¨
//this.ctx.dispatch('inc', 10); // or this.ctx.dispatch('asynInc', 10)

//  --------- å¯¹äºå‡½æ•°ç»„ä»¶ -----------
const { state, mr } = useConcent("counter");// useConcent è¿”å›çš„å°±æ˜¯ctx
const changeNum = () => mr.inc(20); // or ctx.mr.asynInc(10)

//å¯¹äºå‡½æ•°ç»„å°†åŒæ ·æ”¯æŒdispatchè°ƒç”¨æ–¹å¼
//ctx.dispatch('inc', 10);  // or ctx.dispatch('asynInc', 10)
```

<br />
<h3 class="seeDemoCode textLeft">
  å®šä¹‰æ¨¡å—è®¡ç®—
</h3>
<br />

<div class="summaryContent textLeft">
  å½“éœ€è¦ç”¨æ¨¡å—çŠ¶æ€ä½œä¸ºè¾“å…¥å†æ¬¡è®¡ç®—æ–°çš„ç»“æœæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰æ¨¡å—æ—¶æ·»åŠ computedå±æ€§ï¼Œå®šä¹‰ç›®æ ‡è®¡ç®—å‡½æ•°ã€‚
</div>
<div class="summaryContent textLeft">
  æ³¨æ„ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå½“ä»è®¡ç®—å‡½æ•°çš„å‚æ•°åˆ—è¡¨è§£æ„å‡ºç›¸å…³çš„è®¡ç®—å‚ä¸çŠ¶æ€å€¼æ—¶ï¼Œå°±ç¡®å®šäº†å½“å‰è®¡ç®—å‡½æ•°éœ€è¦è¢«å†æ¬¡è§¦å‘è®¡ç®—çš„ä¾èµ–å…³ç³»åˆ—è¡¨ï¼Œè¿™æ˜¯éå¸¸ç”¨æˆ·çš„ç¬¦åˆä»£ç ä¹¦å†™ç›´è§‰çš„ï¼Œæ‰€å†™å³æ‰€å¾—ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–çš„è¯­æ³•å¹²æ‰°ã€‚
</div>
<br />


```js
run({
  counter: {
    state: { num: 1, numBig: 100 },
    computed: {
      numx2: ({num}) => num * 2,
      numSumBig: ({num, numBig}) => num + numBig,
    },
  }
});
```

<br />
<h3 class="seeDemoCode textLeft">
  ç»„ä»¶æ¶ˆè´¹æ¨¡å—è®¡ç®—ç»“æœ
</h3>
<br />

<div class="summaryContent textLeft">
  ä¾èµ–æ”¶é›†æœºåˆ¶å¯¹æ¨¡å—è®¡ç®—ç»“æœä¾ç„¶æœ‰æ•ˆï¼Œæ‰€æœ‰å®ä¾‹åœ¨æ¯ä¸€è½®æ¸²æŸ“æœŸé—´ç»„ä»¶è¯»å–æ¨¡å—è®¡ç®—ç»“æœæ—¶ï¼Œconcentå°†æ”¶é›†åˆ°å®ƒä»¬å¯¹æ¨¡å—çŠ¶æ€çš„ä¾èµ–åˆ—è¡¨
</div>
<br />

```js
// åœ¨ç±»ç»„ä»¶é‡Œè¯»å–æ¨¡å—çŠ¶æ€
const { moduleComputed } = this.ctx;
// åœ¨å‡½æ•°ç»„ä»¶é‡Œè¯»å–æ¨¡å—çŠ¶æ€
const { moduleComputed } = useConcent('counter');

const { numx2, numSumBig } = moduleComputed;// æŒ‰éœ€è§£æ„ç›®æ ‡è®¡ç®—ç»“æœ
```

<br />
<h3 class="seeDemoCode textLeft">
  è¿æ¥å¤šä¸ªæ¨¡å—
</h3>
<br />

<div class="summaryContent textLeft">
  æ‰€æœ‰concentç»„ä»¶åªå…è®¸å±äºæŸä¸€ä¸ªæ¨¡å—ï¼Œå¦‚éœ€æ¶ˆè´¹å¤šä¸ªæ¨¡å—çš„æ•°æ®å’Œè°ƒç”¨å¤šä¸ªæ¨¡å—çš„æ–¹æ³•æ—¶ï¼Œå¯ä½¿ç”¨connectæ¥å®Œæˆã€‚
</div>
<div style="text-align:center;">
<img style="max-width:780px" src="https://raw.githubusercontent.com/fantasticsoul/assets/master/img/cc/cc-class-and-instance-state.png"/>
</div>

<div class="summaryContent textLeft">
  å½“æŸä¸ªå®ä¾‹è¯»å–connectedState.moduleNameä¸‹çš„æ•°æ®æ—¶ï¼Œconcentå°†æ”¶é›†å®ƒåˆ°å¯¹æ‰€è¿æ¥æ¨¡å—çš„ä¾èµ–åˆ—è¡¨ï¼ŒåŒæ—¶ç»„ä»¶å¯ä»¥ä½¿ç”¨cr.moduleNameè°ƒç”¨ç›®æ ‡æ¨¡å—çš„reduceræ–¹æ³•ï¼ˆcrå³connectedReducerç¼©å†™ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨setModuleState(moduleName, newPartialState)æ¥ç›´æ¥ä¿®æ”¹ç›®æ ‡æ¨¡å—çš„æ•°æ®
</div>

```js
@register({module:'counter', connect:['foo', 'bar']})
class ClsComp extends React.Component{
  render(){
    const { connectedState, cr, setModuleState } = this.ctx;
    const { foo, bar } = connectedState;
    const changeFooState = e=> cr.foo.changeSomeKey({key: e.target.value});
  }
}

function FnComp(){
  const {cr, connectedState,setModuleState } = useConcent({module:'counter', connect:['foo', 'bar']});
  const { foo, bar } = connectedState;
  const changeFooState = e=> cr.foo.changeSomeKey({key: e.target.value});
}
```

<br />
<h3 class="seeDemoCode textLeft">
  å…¨å±€æ¨¡å—
</h3>
<br />

<div class="summaryContent textLeft">
  concentå†…ç½®äº†ä¸€ä¸ªå…¨å±€æ¨¡å—$$globalï¼Œæ— è®ºç»„ä»¶æœ‰æ²¡æœ‰connectåˆ°$$globalï¼Œéƒ½ä¼šè‡ªåŠ¨å°†å…¨å±€æ¨¡å—çš„çŠ¶æ€æ³¨å…¥åˆ°å®ä¾‹ä¸Šä¸‹æ–‡çš„globalStateé‡Œï¼Œå› ä¸ºconcerntå†…ç½®çš„ä¾èµ–æ”¶é›†æœºåˆ¶ï¼Œå®ä¾‹ä¸è¯»å–å®ƒçš„å€¼åˆ™ä¸ä¼šå› å…¨å±€çŠ¶æ€çš„æ”¹å˜è€Œè§¦å‘é‡æ¸²æŸ“ã€‚
</div>

```js
run({
  $$global:{// é‡æ–°å…¨å±€æ¨¡å—çŠ¶æ€ï¼Œä¸å†™çš„è¯é»˜è®¤æ˜¯ç©ºå¯¹è±¡ {}
    state: {theme:'green'}
  }
})

// ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶è¯»å–globalStateçš„ç›®æ ‡çŠ¶æ€
const { globalState } = this.ctx;
const { globalState } = useConcent();
```

<br />
<h3 class="seeDemoCode textLeft">
  æ–¹ä¾¿çš„é¡¶å±‚api
</h3>
<br />

<div class="summaryContent textLeft">
åœ¨è„±ç¦»uièŒƒå›´çš„æ—¶å€™ï¼Œconcentå…è®¸ç”¨æˆ·ä½¿ç”¨é¡¶å±‚apiä¿®æ”¹çŠ¶æ€ã€‚
</div>

<div class="summaryContent textLeft">
ğŸ‘‰ä½¿ç”¨setState   
</div>

```js
import { getState, setState } from "concent";

console.log(getState('counter').num);// log: 1
setState('counter', {num:10});// ä¿®æ”¹counteræ¨¡å—numå€¼
console.log(getState('counter').num);// log: 10
```

<div class="summaryContent textLeft">
ğŸ‘‰ä½¿ç”¨ dispatchï¼Œdispatchä¼šè¿”å›ä¸€ä¸ªpromiseï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å¤–éƒ¨åŒ…è£¹ä¸€ä¸ªasync
</div>

```js
import { getState, dispatch } from "concent";

(async ()=>{
  console.log(getState("counter").num);// log 1
  await dispatch("counter/inc");
  console.log(getState("counter").num);// log 2
  await dispatch("counter/asyncInc");
  console.log(getState("counter").num);// log 3
})()
```

<div class="summaryContent textLeft">
ğŸ‘‰ä½¿ç”¨ reducerï¼Œrunæ¥å£å®šä¹‰çš„reduceré›†åˆå·²è¢«concenté›†ä¸­ç®¡ç†èµ·æ¥ï¼Œå¹¶å…è®¸ç”¨æˆ·ä»¥reducer.moduleName.methodNameçš„æ–¹å¼ç›´æ¥å‘èµ·è°ƒç”¨
</div>

```js
import { getState, reducer as ccReducer } from "concent";

(async ()=>{
  console.log(getState("counter").num);// log 1
  await ccReducer.counter.inc();
  console.log(getState("counter").num);// log 2
  await ccReducer.counter.asyncInc();
  console.log(getState("counter").num);// log 3
})()
```

<div class="summaryContent textLeft">
ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·å¿«é€ŸéªŒè¯å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€äº›æ€è·¯ï¼Œè¿™äº›apiå·²ç»‘å®šåˆ°window.ccä¸‹ï¼Œç”¨æˆ·å¯æ‰“å¼€æµè§ˆå™¨consoleï¼Œè¾“å…¥ cc. å³å¯å¼€å§‹ç›´æ¥è°ƒç”¨è¿™äº›apiï¼Œé™¤äº†ccï¼Œè¿˜å¯é€šè¿‡window.sssæŸ¥çœ‹æ•´ä¸ªçŠ¶æ€æ ‘ï¼Œwindow.ccccæŸ¥çœ‹æ•´ä¸ªè®¡ç®—ç»“æœæ ‘ã€‚
</div>


<br />
<h3 class="seeDemoCode textLeft">
  äº‹ä»¶
</h3>
<br />

<div class="summaryContent textLeft">
  æ‰€æœ‰ç»„ä»¶å®ä¾‹å¯ä»¥åœ¨setupé‡Œå®šä¹‰ç›‘å¬çš„äº‹ä»¶ï¼Œæ–¹ä¾¿ä¸åŒèŠ‚ç‚¹å¿«é€Ÿå”¤èµ·ä¸€äº›ä½è€¦åˆçš„çš„ä¸šåŠ¡æ–¹æ³•
</div>

```js
const setup = ctx=>{
  // ç›‘å¬æ™®é€šäº‹ä»¶
  ctx.on('evName', (p1, p2)=>{/** å¤„ç†ä¸šåŠ¡ */});
  // ç›‘å¬å¸¦idçš„äº‹ä»¶ï¼Œé€‚ç”¨äºæœ‰å¤šä¸ªå®ä¾‹çš„ç»„ä»¶ï¼Œéœ€æŒ‰ä¸šåŠ¡idè§¦å‘å…·ä½“å›è°ƒæ—¶
  ctx.on(['identityEvName', ctx.props.id], (p1, p2)=>{/** å¤„ç†ä¸šåŠ¡ */})
}
```

<div class="summaryContent textLeft">
  å®ä¾‹å†…éƒ¨å¯é€šè¿‡ctx.emitå‘å°„äº‹ä»¶ï¼Œå…¶ä»–åœ°æ–¹é€šè¿‡é¡¶å±‚apiå‘å°„äº‹ä»¶
</div>

```js
import { emit } from 'concent';

emit('someEvent', 1, 2 )
emit(['someIdentityEvent', 'id1'], 1, 2 )

const setup = ctx=>{
  const triggerEmit = ()=> ctx.emit('someEvent', 1, 2);
  const triggerIdentityEmit = ()=> ctx.emit('someIdentityEvent', 1, 2);
  // æ‰“åŒ…è¿”å›åˆ°settingsé‡Œç»™uiç»‘å®š
  return { triggerEmit, triggerIdentityEmit};
}
```

<h2 style="font-weight:300; width:100%; text-align:center; margin: 66px 0;">
  å…¶ä»–<span style="font-weight:600;">å…³é”®ç‰¹æ€§</span>
</h2>

<a class="seeDemoCode textLeft" rel="noopener" target="blank" href="https://codesandbox.io/s/hello-concent-pzde3?file=/src/App.js:50-92">
  â¤ï¸ ä½¿ç”¨<span style="font-weight:600;" >ç»„åˆapi</span>
</a>
<div class="summaryContent textLeft">
  å¾—ç›Šäºsetupæ¥å£åªä¼šåœ¨ç»„ä»¶åˆæ¬¡æ¸²æŸ“ä¹‹å‰æ‰§è¡Œä¸€æ¬¡çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨å…¶å†…éƒ¨ä½¿ç”¨ç»„åˆapiå¸®åŠ©æˆ‘ä»¬å°†å‡½æ•°ç»„ä»¶é‡Œæ¯ä¸€è½®æ¸²æŸ“éœ€è¦å£°æ˜çš„ä¸´æ—¶é—­åŒ…å‡½æ•°æå‡ä¸ºé™æ€å‡½æ•°
</div>

```js
import { run, useConcent } from "concent";

run();// å¯åŠ¨concent

const setup = ctx => {
  const { initState, computed, watch, setState } = ctx;
  // åˆå§‹åŒ–å®ä¾‹çŠ¶æ€
  initState({ count: 0 });
  // å®šä¹‰è®¡ç®—å‡½æ•°ï¼Œè¿™é‡Œçš„ä¾èµ–æ˜¯countï¼Œä»…å½“countå˜åŒ–ï¼Œè§¦å‘æ­¤å‡½æ•°é‡æ–°è®¡ç®—
  computed("doubleCount", n => n.count * 2);
  // å®šä¹‰è§‚å¯Ÿå‡½æ•°ï¼Œè¿™é‡Œçš„ä¾èµ–æ˜¯countï¼Œä»…å½“countå˜åŒ–ï¼Œä¼šå¼¹æ­¤æç¤º
  watch("count", (n, o) => alert(`from ${o.count} to ${n.count}`));
  // æ‰“åŒ…æ–¹æ³•è¿”å›ï¼Œå°†è¢«æ”¶é›†åˆ°settingsé‡Œ
  return {
    inc: () => setState({ count: ctx.state.count + 1 }),
    dec: () => setState({ count: ctx.state.count - 1 })
  };
};

function Counter(){
  // è¿™äº›æ˜¯ä»å®ä¾‹ä¸Šä¸‹æ–‡é‡Œè§£æ„å‡ºæ¥çš„å±æ€§
  const { state, refComputed, settings } = useConcent({ setup });
  return (
    <>
      <h1>{state.count}</h1>
      <h1>{refComputed.doubleCount}</h1>
      <button onClick={settings.inc}>inc</button>
      <button onClick={settings.dec}>dec</button>
    </>
  );
}
```


<br /> 
<a class="seeDemoCode textLeft" rel="noopener" target="blank" href="https://codesandbox.io/s/hello-concent-shared-cu1i9">
  â¤ï¸ç»Ÿä¸€<span style="font-weight:600;" >ç±»ç»„ä»¶</span>å’Œ<span style="font-weight:600;" >å‡½æ•°ç»„ä»¶</span>ç”Ÿå‘½å‘¨æœŸ
</a>
<div class="summaryContent textLeft">
  setupå¯åŒæ—¶ä½œç”¨äºç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶ï¼Œæä¾›çš„effectæ¥å£ç»Ÿä¸€é€‚é…äº†å‡½æ•°å’Œç±»çš„ç”Ÿå‘½å‘¨æœŸæ¥å£ã€‚
</div>
<div style="text-align:center;">
<img style="max-width:780px" src="https://raw.githubusercontent.com/fantasticsoul/assets/master/article-img/rmc-comparison/cc-unified-lifecycle-en.png"/>
</div>

<div class="summaryContent textLeft">
  ç”¨æˆ·å¯ä»¥å®Œå…¨ç”¨å‡½æ•°ç»„ä»¶çš„å‰¯ä½œç”¨æ€æƒ³å»ç®¡ç†ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸šåŠ¡é€»è¾‘ã€‚
</div>

```js
const setup = ctx => {
  ctx.effect(() => {/**ä¸šåŠ¡ä»£ç */}, ["num"]);// å£°æ˜ä¾èµ–åç§°å³å¯

  ctx.effect(() => {
    return () => {
      // è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œ ç­‰ä»·äºcomponentWillUnmout
    };
  }, []);// ä¾èµ–ä¸ºç©ºæ•°ç»„ï¼Œä»…åœ¨é¦–æ¬¡æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œä¸€æ¬¡
};
```

<div class="summaryContent textLeft">
  ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶éƒ½å¯è£…é…æ­¤setupå‡½æ•°ï¼Œå…±ç”¨ç”Ÿå‘½å‘¨æœŸä¸šåŠ¡é€»è¾‘
</div>

```js
function Counter() {
  const { state, moduleComputed, moduleReducer, settings } = 
    useConcent({ setup, module: "counter" });
  return <div> ui ... </div>
}

@register({ setup, module: "counter" })
class ClassCounter extends React.Component{
  render(){
    const { state, moduleComputed, moduleReducer, settings } = this.ctx;
    return <div> ui ... </div>
  }
}
```

<br/>
<a class="seeDemoCode cake" href="https://juejin.im/post/5deb43256fb9a0166316c3e9">äº†è§£æ›´å¤šå…³äºeffectå’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸç»Ÿä¸€</a>

<a class="exploreMore" href="./guide/first-sight">
  Explore <span style="font-weight:600;">more</span>
</a>
